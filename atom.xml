<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Ubiratan Soares]]></title>
  <link href="http://ubiratansoares.github.io/atom.xml" rel="self"/>
  <link href="http://ubiratansoares.github.io/"/>
  <updated>2014-05-26T06:45:34-03:00</updated>
  <id>http://ubiratansoares.github.io/</id>
  <author>
    <name><![CDATA[Ubiratan Soares]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Cinco anos de Saudadade]]></title>
    <link href="http://ubiratansoares.github.io/blog/2014/05/26/cinco-anos-de-saudadade/"/>
    <updated>2014-05-26T06:35:29-03:00</updated>
    <id>http://ubiratansoares.github.io/blog/2014/05/26/cinco-anos-de-saudadade</id>
    <content type="html"><![CDATA[<p><em>// Esse post é um dos selecionados do meu antigo blog do Wordpress</em></p>

<p>As perguntas que não querem calar.</p>

<p>Afinal de contas, quem vemos aqui?</p>

<p>Barba e cabelo atrozes… Peito de fora para suportar o possível calor escaldante…</p>

<!-- More -->

<p><img src="https://raw.githubusercontent.com/ubiratansoares/ubiratansoares.github.io/master/images/pai.jpg" /></p>

<p>Bem, com certeza é alguém relaxado em um dos seus poucos momentos de paz…</p>

<p>Que lugar será esse acima?</p>

<p>Seria sua amada Arco Verde, onde por tanto tempo viveu?</p>

<p>Seria Flores? Serra Talhada? São Bento do Una?</p>

<p>Ou algum outro lugar de nome poético, do sertão pernambucano que tanto amou?</p>

<p>Que é o sertão, ah, isso eu sei!</p>

<p>O céu puro anil não mente. Não para quem já esteve lá um dia…</p>

<p>O juazeiro ao fundo apenas corrobora… Ou seria um umbuzeiro?</p>

<p>Quando será que essa imagem foi feita?</p>

<p>Eu não tenho como saber…</p>

<p>Mas imagino que foi depois que esse sertanejo já havia decidido vencer no Sudeste…</p>

<p>Talvez em algum momento de regresso, para matar um pouco da saudade e descansar da labuta…</p>

<p>E quem acompanhou a luta… bem… sabe que leão, é sim, um bicho do sertão !</p>

<p>Uma história paralela a de tantos retirantes, mas única à sua maneira…</p>

<p>Do nordestino que chegou a São Paulo no sufoco e acabou em uma grande fábrica de fogões…</p>

<p>Do curioso se enfiou em uma das multinacionais do setor elétrico…</p>

<p>Do sortudo que virou funcionário público meio que por acaso…</p>

<p>Do visionário que abraçou as oportunidades certas nos momentos certos…</p>

<p>Do irmão que se doou além dos laços de irmandade…</p>

<p>Do pai que sempre acreditou acima de tudo na família…</p>

<p>Do aposentado bem sucedido que se cansou de não trabalhar e decidiu virar caminhoneiro…</p>

<p>Do homem que se entregou pelos outros e no fim, se viu abandonado sobretudo pela própria força…</p>

<p>Pois mesmo os leões um dia envelhecem…</p>

<p>Se cansam…</p>

<p>E são castigados pelas escolhas que fazem ao longo de uma vida…</p>

<p>Ainda sim, a história fica.</p>

<p>E é com saudade que eu apenas a arranho nessas palavras…</p>

<p>Ah meu pai…</p>

<p>Sua falta nunca foi tão sentida…</p>

<p>Que seus bons e maus exemplos me guiem.</p>

<p>E que você esteja bem onde você estiver.</p>

<p>Pois essa noite, antes de dormir, eu peço <em>“Bença, Pai!”</em></p>

<p>Hábito simples que eu me arrependendo tanto de ter passado a menosprezar…</p>

<p>Culpa do processo da máquina de resolver problemas, que costumeirament enfraquece o espiríto e a fé..</p>

<p>Mas ainda sim, eu pedia às vezes…</p>

<p>E eu daria tudo para ter agora um <em>“Deus te abençoe, meu filho!”</em>.</p>

<p>É exatamente o que eu preciso para esse momento…</p>

<p>Ou então, quem sabe alguma das nossas intermináveis conversas ao sofá…</p>

<p>Responsáveis, antes de tudo, por forjar o meu caráter…</p>

<p>Mas, quem sabe em algum sonho?</p>

<p>Ou então, quem sabe no momento após eu me confrontar com meu fim?</p>

<p>Olha meu pai, a saudade ainda é grande…</p>

<p>É tão grande, que parafraseando um grande cantor, <em>“não cabe no peito, e escorre pelos olhos“</em> …</p>

<p>Mas eu sou jovem agora, assim como você foi….</p>

<p>Por enquanto que o mundo conheça você, no ápice da sua juventude.</p>

<p>Na sua fase “Chê Guevara”, diretamente de Belo Jardim! <strong>=D</strong></p>

<p>Uma história que muitos ainda vão querer ouvir por inteiro.</p>

<p>Mesmo que eu só conheça, talvez, a metade.</p>

<p>R.I.P</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Trazendo seu projeto para o Android Studio de maneira transparente]]></title>
    <link href="http://ubiratansoares.github.io/blog/2014/05/12/trazendo-seu-projeto-para-o-android-studio-de-maneira-transparente/"/>
    <updated>2014-05-12T20:05:49-03:00</updated>
    <id>http://ubiratansoares.github.io/blog/2014/05/12/trazendo-seu-projeto-para-o-android-studio-de-maneira-transparente</id>
    <content type="html"><![CDATA[<p>Tenho defendido recentemente - veja, é a minha humilde opinião - que o Eclipse como ambiente para o desenvolvimento Android está com os dias contados. </p>

<p>Talvez essa seja uma opinião radical para o atual momento, visto que o Eclipse é muito utilizado - em especial pelos iniciantes - e de alguma forma melhor divulgado na literatura técnica; contudo, o fato é que o Eclipse já não se mostra a opção de melhor produtividade para o desenvolvedor Android mais experiente já há algum tempo, e o advento do <strong>Android Studio</strong> apenas simboliza isso de forma oficial. </p>

<!-- More -->

<p>Enquanto o aniversário de um ano do Android Studio não chega, vale salientar novamente que, enquanto <em>IDE</em>, ele é basicamente o que encontramos na sua ferramenta irmã, o <strong>IntelliJ IDEA</strong>, embora as distinções estejam se acentuando com o passar dos meses… </p>

<p>Penso que o maior valor agregado ao desenvolvedor não reside aí : reside sim no novo <strong>sistema de build</strong> que junto com uma versão do IDEA customizada compõe o Android Studio: estou falando dele, do <strong>Gradle</strong>.</p>

<p>Tenho comparado atualmente o Gradle com o <strong>Git</strong> : para o desenvolvedor, é mais uma ferramenta de produtividade não imediatamente óbvia, e mais uma curva de aprendizado a vencer. </p>

<p>As possibilidades na superfície do Gradle já são por demais interessantes, de modo que hoje acho impossível voltar atrás e trabalhar na antiga proposta do Eclipse, mesmo com as <em>builds</em> relativamente mais lentas do Gradle no meu modesto <em>hardware</em> do trabalho. </p>

<p>Acredito que essa é uma opinião compartilhada por muitos desenvelvodores, e não apenas diretantismo da minha cabeça….</p>

<h3 id="consideraes-iniciais">Considerações Iniciais</h3>

<p>Suponha que você decida trazer um dos seus projetos pessoais, ou melhor ainda, aquele projeto do trabalho para o Android Studio. </p>

<p>Se você quer ter o real valor agregado da solução que se chama Android Studio, eu suponho que você quer sentir o gostinho do Gradle. </p>

<p>O problema é que a opção de <strong>Import…</strong> do Android Studio com grande chances vai deixar a desejar em projetos maiores e mais antigos; se assim não o fizer, ela tende a ser no mínimo não intuitiva. </p>

<p>Em especial, isso acontece com aqueles projetos típicos do Eclipse, não muito bem estruturados do ponto de vista de organização das dependências(ou com várias bibliotecas <em>linkadas</em> manualmente por excelência). </p>

<p>Em geral, essa opção de <em>Import</em> vai compor o projeto no Android Studio como uma estrutura de módulos com <em>build</em> pela própria IDE nos moldes típicos do IntelliJ, e sem o suporte ao Gradle de fato.</p>

<p>Mesmo hoje, na versão 0.5.8 do Android Studio, eu me deparo com a seguinte tela ao tentar importar um projeto :</p>

<p><img src="https://raw.githubusercontent.com/ubiratansoares/ubiratansoares.github.io/master/images/ss_gradle_import.png" /></p>

<p>o que significa que ao final o projeto será importado na tradicional estrutura em módulos do IntelliJ, e provavelmente apenas isso.</p>

<p>O processo de importação está longe de acontecer de forma automática e transparente entre os dois ambientes para a maioria dos casos. Como proceder então?</p>

<h5 id="comear-com-um-novo-projeto-no-android-studio">Começar com um novo projeto no Android Studio</h5>

<p>Você pode criar um projeto no Android Studio do zero, o qual já irá trazer a estrutura de diretórios padrão já configurada bem como os arquivos já inicializados para o Gradle. </p>

<p>Você pode então manualmente migrar todas as suas classes e diretórios com <em>assets</em> para essa nova estrutura, não esquecendo  também das dependências (falaremos disso mais à frente). </p>

<p>Essa é uma abordagem direta e bastante utilizada. Eu considero ela como <strong>“Top-Down”</strong>. Serve muito bem para “sacudir a poeira”, atualizando as dependências do projeto ou mesmo descartando o que não é mais usado. Com certeza muito mais trabalhosa do que difícil… </p>

<p>O único problema que vejo com ela é : como fazemos com membros do time que ainda preferem usar o <strong>Eclipse</strong>, já que criamos na prática um outro projeto, em um outro ambiente ? Deixamos de lado? </p>

<p>Algumas vezes, isso não é uma opção, e devemos respeitar as preferências, mesmo as de IDE. Ou então, o fluxo de trabalho simplesmente não pode parar de forma significativa para cada membro do time …</p>

<h5 id="adicionar-suporte-ao-gradle-ao-projeto-j-existente">Adicionar suporte ao Gradle ao projeto já existente</h5>

<p>Você pode adicionar o suporte ao Gradle - e consequentemente ao Android Studio, em uma opção de <strong>Import</strong> direta via <em>Gradle Model</em> - em um projeto estruturado no Eclipse de uma maneira mais artesanal, investigando como acertar cada um dos arquivos <strong>build.gradle</strong> nas bibliotecas de interesse e estudando as dependências para que o controle seja feito <strong>ao máximo</strong> pelo próprio Gradle. </p>

<p>Se assim o fizer, você executará um procedimento transparente para colegas do seu time, já que agora o projeto agora também é totalmente acessível e manipulável pelo Android Studio com a adição de apenas alguns arquivos do Gradle. </p>

<p>Essa abordagem eu considero mais como <strong>“Bottom-Up”</strong>, e é com certeza mais trabalhosa.</p>

<p>Eu tive recentemente a oportunidade de trazer alguns projetos do meu time que foram criados - e ganham continuidade - no Eclipse para o ambiente do Android Studio, pelo segundo caminho. Decidi, então, compartilhar aqui algumas das coisas que aprendi. </p>

<p>Espero que elas sejam úteis para quem trabalha em time como eu, e que eventualmente pretende utilizar essa experiência para perder o medo e convencer os amigos a deixar o Eclipse morrer em paz…</p>

<h3 id="mapeando-dependncias">Mapeando Dependências</h3>

<p>Inicialmente, eu aconselho fortemente que você comece o seu processo de suporte ao Android Studio assim :</p>

<div><div class="CodeRay">
  <div class="code"><pre>&gt; git checkout -b gradle_build
Switched to a new branch 'gradle_build'
</pre></div>
</div>
</div>

<p>afinal de contas, temos o Git para nos auxiliar nos eventuais vacilos…</p>

<p>O primeiro passo para uma migração “Bottom-Up” é investigar as depedências do projeto. A idéia aqui é fazer um levantamento de tudo que queremos que Gradle controle de forma automatizada, buscando ao máximo utilizar artefatos atualizados advindos de repositórios <strong>Maven</strong>.</p>

<p>Eu não vou entrar na discussão sobre dependências do Gradle em si, mas a princípio podemos assumir que ele é capaz de trabalhar de forma transparente com repositórios de artefatos do Maven, e isso é <strong>amplamente</strong> utilizado. </p>

<p>Nessa etapa, não vai ter muito como fugir de uma pesquisa nos repositórios do Github, verificando quais das suas bibliotecas <em>Open Source</em> já tinha um artefato disponível em algum repositório Maven, quais valem uma atualização, dentre outros.</p>

<p>No meu caso, eu também tive alguma “sorte”, pois todos os projetos que constavam como bibliotecas associadas via <em>Workspace</em> do Eclipse estavam presentes no controle de versão, acessíveis hierarquicamente a partir do diretório-raiz do projeto :</p>

<div><div class="CodeRay">
  <div class="code"><pre>&gt; ls -la
total 32
drwxr-xr-x  18 bira  staff   612B May 12 16:39 ./
drwxr-xr-x  12 bira  staff   408B May 12 16:34 ../
drwxr-xr-x  13 bira  staff   442B May 12 16:30 .git/
drwxr-xr-x  18 bira  staff   612B May 12 16:02 ProjetoMobile/
drwxr-xr-x  11 bira  staff   374B May 12 16:02 Library-PullToRefresh/
drwxr-xr-x  13 bira  staff   442B May 12 16:02 Library-ShowCaseView/
drwxr-xr-x  15 bira  staff   510B May 12 16:02 Library-SmoothProgressBar/
drwxr-xr-x   8 bira  staff   272B May 12 16:02 Library-WizardPager/
drwxr-xr-x  12 bira  staff   408B May 12 16:02 UndoBar/
drwxr-xr-x  14 bira  staff   476B May 12 16:02 library-sugar/
drwxr-xr-x  13 bira  staff   442B May 12 16:02 library_DSVL/
drwxr-xr-x  14 bira  staff   476B May 12 16:02 library_ListViewAnimation/
</pre></div>
</div>
</div>

<p>Se esse for o seu caso, você já pode verificar facilmente quais já possuem suporte ao Gradle para agilizar :</p>

<div><div class="CodeRay">
  <div class="code"><pre>&gt;  tree -fL 2 | grep build.gradle
│   ├── ./Library-PullToRefresh/build.gradle
│   ├── ./Library-ShowCaseView/build.gradle
│   ├── ./Library-SmoothProgressBar/build.gradle
│   ├── ./UndoBar/build.gradle
│   ├── ./library-sugar/build.gradle
│   ├── ./library_ListViewAnimation/build.gradle
</pre></div>
</div>
</div>

<p>É preciso também conferir os artefatos que existem no diretório <em>libs</em> :</p>

<div><div class="CodeRay">
  <div class="code"><pre>&gt; ls -la ProjetoMobile/libs/
total 2632
drwxr-xr-x   9 bira  staff   306B May 12 16:02 ./
drwxr-xr-x  18 bira  staff   612B May 12 16:02 ../
-rw-r--r--   1 bira  staff   607K May 12 16:02 android-support-v4.jar
-rw-r--r--   1 bira  staff    32K May 12 16:02 butterknife-4.0.1.jar
-rw-r--r--   1 bira  staff    45K May 12 16:02 datecs.jar
-rw-r--r--   1 bira  staff    60K May 12 16:02 ndeftools-1.2.4.jar
-rw-r--r--   1 bira  staff    77K May 12 16:02 picasso-2.1.1.jar
</pre></div>
</div>
</div>

<p>de modo que, complementando com a inspeção do arquivo <em>.project</em> - que revela a utilização do <strong>Google Play Services</strong>, referenciado diretamente no diretório do Android SDK - contei 14 depedências no projeto.</p>

<p>Bom, como eu já comentei, a idéia é mover o máximo dessas dependências para o controle via Gradle, pois queremos atualizar essas dependendências de uma automática e por muitas vezes automática.</p>

<p>Dessa forma, fiz o seguinte levantamento preliminar :</p>

<p>(a) Quais artefatos do diretório _<projeto>/libs_ podem ser adicionados via Maven?</projeto></p>

<p>No meu caso, eu tinha : </p>

<ul>
  <li>android-support-v4 : <strong>Disponível</strong></li>
  <li>ButterKnife : <strong>Disponível</strong></li>
  <li>Picasso : <strong>Disponível</strong></li>
  <li>Google Play Services : <strong>Disponível</strong></li>
  <li>NDefTools : <strong>Disponível</strong></li>
</ul>

<p>Apenas a biblioteca <strong>datecs.jar</strong> não era um artefato do tipo Maven devidamente gerenciado em algum repositório público, e optei por mantê-la como dependência local do projeto. Eu não precisaria fazer assim, mas isso é assunto para um outro dia….</p>

<p>(b) Das bibliotecas adicionas como projetos via <em>Workspace</em> do Eclipse, quais podem ser gerenciadas via Maven ao invés de serem incluídas como <em>Project Libraries</em> ?</p>

<p>Inicialmente, fui informado de ante-mão que, para as bibliotecas associadas via <em>Workspace</em>, três delas sofreram alteração no código-fonte durante o desenvolvimento ( <strong>WizardPager</strong>, <strong>SugarORM</strong> e <strong>UndoBar</strong>), devidamente registrado no controle de versão. </p>

<p>Além disso, as bibliotecas <strong>DragAndSortListView</strong> e <strong>WizardPager</strong> não possuem suporte ao Gradle por parte de seus desenvolvedores. </p>

<p>Dessa forma, eu fui capaz de compilar uma listagem dos <em>Project Libraries</em> que a princípio poderiam ser movidos para o gerenciador de dependências do Gradle :</p>

<ul>
  <li>PullToRefresh : <strong>OK</strong></li>
  <li>ShowCaseView : <strong>OK</strong> </li>
  <li>Smooth Progress Bar : <strong>OK</strong></li>
  <li>Wizard Pager : <strong>Não OK</strong> </li>
  <li>UndoBar : <strong>Não OK</strong> </li>
  <li>SugarORM : <strong>Não OK</strong> </li>
  <li>ListViewAnimations : <strong>OK</strong></li>
  <li>DragAndSortListView : <strong>Não OK</strong> </li>
  <li>StickyListHeaders : <strong>OK</strong></li>
</ul>

<p>Como isso, estava pronto para começar o processo de migração.</p>

<h3 id="criando-arquivos-e-fazendo-o-bsico-da-build">Criando arquivos e fazendo o básico da build</h3>

<p>Uma vez feito o levantamento das dependências, devemos criar os arquivos do Gradle necessários para que o mesmo saiba resolver as dependências e compilar cada um dos projetos associados - ou daqui em diante, <strong>módulos</strong> - de interesse, bem como o projeto principal em si.</p>

<p>Para isso, devemos proceder basicamente da seguinte forma :</p>

<ol>
  <li>
    <p>Criar os arquivos de escopo geral do Gradle na raiz do projeto.</p>
  </li>
  <li>
    <p>Para cada um dos módulos que permanecerão fora do gerenciador de de dependências, criar ou atualizar o arquivo <strong>build.gradle</strong> na raiz desse módulo.</p>
  </li>
</ol>

<p>O primeiro passo é bastante tranquilo de ser executado. Em geral, o Gradle vai precisar de dois arquivos “globais” na raiz do projeto, <strong>settings.gradle</strong> e <strong>build.gradle</strong>. Repare que ao criar um novo projeto no Android Studio, ambos estão lá.</p>

<p>O primeiro, <strong>build.gradle</strong>, serve para mapear configurações válidas para todos as partes - ou módulos - da <em>build</em>. Em geral, ele é mais ou menos assim por padrão </p>

<div><div class="CodeRay">
  <div class="code"><pre>// Top-level build file where you can add configuration options common to all sub-projects/modules.
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.9.+'
    }
}

allprojects {
    repositories {
        mavenCentral()
    }
}
</pre></div>
</div>
</div>

<p>mas pode ser <em>customizado</em> conforme o interesse. Um exemplo típico : adicionar novas <em>URLs</em> para repositórios de artefatos tipo Maven.</p>

<p>O segundo, <strong>settings.gradle</strong>, é utilizado a princípio para indicar quais diretórios farão parte da <em>build</em>. Nessa hora, indicamos apenas projetos que estão <em>linkados</em> via <em>Workspace</em> e que vão a princípio continuar assim … </p>

<p>Essa, portanto, é a abordagem de adicionar um projeto como biblioteca com código-fonte para projetos do Android Studio :</p>

<div><div class="CodeRay">
  <div class="code"><pre>include 'ProjetoMobile'
include ':library-sugar'
include ':Library-WizardPager'
include ':library_DSVL'
include ':UndoBar'
</pre></div>
</div>
</div>

<p>Além disso, devemos adicionar um arquivo <strong>build.gradle</strong> para o módulo do projeto em si. Nesse caso, iremos mapear todas as dependências que queremos que o próprio Gradle resolva, bem como o que está sendo referenciado como módulo também, além dos artefatos já remanescentes no diretório <em>libs</em> :</p>

<div><div class="CodeRay">
  <div class="code"><pre>apply plugin: 'android'

android {

    compileSdkVersion 19
    buildToolsVersion &quot;19.0.3&quot;

    defaultConfig {
        minSdkVersion 15
        targetSdkVersion 19
        versionCode 1
        versionName &quot;1.0&quot;
    }

    buildTypes {
        release {
            runProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
        }
    }

    sourceSets {

        main {
            manifest.srcFile 'AndroidManifest.xml'
            java.srcDirs = ['src']
            resources.srcDirs = ['src']
            res.srcDirs = ['res']
            assets.srcDirs = ['assets']
        }

        debug.setRoot('build-types/debug')
        release.setRoot('build-types/release')
    }
}

dependencies {
    compile project(':library-sugar')
    compile project(':Library-WizardPager')
    compile project(':library_DSVL')
    compile project(':Library-ShowCaseView')
    compile project(':UndoBar')

    compile files('libs/datecs.jar')

    compile 'com.android.support:support-v4:19.1.+'
    compile 'com.jakewharton:butterknife:5.0.1'
        
...

}
</pre></div>
</div>
</div>

<p>Repare que, nas dependências acima, tenho os três casos possíveis : um <strong>.jar</strong> local, projetos biblioteca ao estilo Gradle e dependências para o próprio Gradle resolver, buscando em repositórios do tipo Maven.</p>

<p>Repare também que, além de referenciar a dependências, eu também preciso <em>“ensinar”</em> ao Gradle a <strong>estrutura de diretórios</strong> para a qual ele deve olhar durante o processo de <em>build</em> desse módulo, já que ela difere da padrão .</p>

<p>Isso é feito no seguinte trecho do script :</p>

<div><div class="CodeRay">
  <div class="code"><pre>    sourceSets {

        main {
            manifest.srcFile 'AndroidManifest.xml'
            java.srcDirs = ['src']
            resources.srcDirs = ['src']
            res.srcDirs = ['res']
            assets.srcDirs = ['assets']
        }
            ...
</pre></div>
</div>
</div>

<p>Esse em geral é um procedimento mais chato de fazer. </p>

<p>Além disso, isso terá que ser feito em cada um dos módulos…</p>

<h3 id="acertando-as-depedncias-modulares">Acertando as Depedências Modulares</h3>

<p>Até aqui, já adicionamos as dependências para serem controladas pelo Gradle para módulo “principal”, o nosso código de fato; chegou investigar melhor as dependências que adicionamos como <em>include</em> - ou aquelas que eu chamo de modulares - na <em>build</em>.</p>

<p>As perguntas básicas aqui devem ser :</p>

<ol>
  <li>
    <p>Todas as dependências são compiláveis via Gradle?</p>
  </li>
  <li>
    <p>Para as dependências que já possuem um <em>script</em> <strong>build.gradle</strong>, o mesmo se encontra devidamente atualizado ?</p>
  </li>
  <li>
    <p>Alguma das depedências possui outras dependências que o Gradle deve resolver?</p>
  </li>
</ol>

<p>No meu caso, <em>DragAndSortListView</em> e <em>WizardPager</em> não possuíam suporte ao Gradle, de modo que tive que adicionar na mão.</p>

<p>O grande problema dessa parte é : a estrutura de diretórios na qual a biblioteca está organizada em geral não é a padrão do Gradle, exatamente no caso do projeto original do Eclipse. Por exemplo, segue um snippet de como ficou o script para a biblioteca <a href="https://github.com/romannurik/Android-WizardPager">WizardPager</a>, do DevRel Roman Nurik, que inclusive estava estruturado como um projeto para <em>build</em> via Maven. </p>

<div><div class="CodeRay">
  <div class="code"><pre>buildscript {
        repositories {
            mavenCentral()
        }

        dependencies {
            classpath 'com.android.tools.build:gradle:0.9.+'
        }
    }

apply plugin: 'android-library'

dependencies {
    compile 'com.android.support:support-v4:19.1.+'
}

android {
    compileSdkVersion 19
    buildToolsVersion &quot;19.0.3&quot;
    sourceSets {
        main {
            manifest.srcFile 'LibWizardPager/AndroidManifest.xml'
            java.srcDirs = ['LibWizardPager/src']
            resources.srcDirs = ['LibWizardPager/src']
            res.srcDirs = ['LibWizardPager/res']
        }
    }
}
</pre></div>
</div>
</div>

<p>Para cada uma dos módulos acrescentados, é necessário fazer esse trabalho de (eventual) adição e (inexorável) inspeção. Ele deve assegurar :</p>

<ul>
  <li>Que o script declara esse módulo como uma biblioteca</li>
  <li>Que as versões do <em>plugin</em> do Android para o Gradle bem como as <strong>build-tools</strong> estão atualizadas de acordo com o seu SDK</li>
  <li>Que os diretórios com os <em>paths</em> de interesse estão mapeados caso não estejam na estrutura padrão do Gradle</li>
  <li>Que as dependências desse módulo estão devidamente declaradas</li>
</ul>

<p>Apenas uma dica : deixe para o Gradle resolver as redundâncias entre módulos declaradas mais de uma vez ao longo dos scripts. Uma das tarefas dele é justamente essa!</p>

<p>Se você seguiu os passos acima com cuidado e critério, você será capaz de executar com sucesso o primeiro comando do Gradle (diretamente da raiz do projeto) :</p>

<div><div class="CodeRay">
  <div class="code"><pre>&gt; gradle tasks
Parallel execution is an incubating feature.
Relying on packaging to define the extension of the main artifact has been deprecated and is scheduled to be removed in Gradle 2.0
:tasks

------------------------------------------------------------
All tasks runnable from root project
------------------------------------------------------------

Android tasks
-------------
androidDependencies - Displays the Android dependencies of the project
signingReport - Displays the signing info for each variant

Build tasks
-----------
assemble - Assembles all variants of all applications and secondary packages.
assembleDebug - Assembles all Debug builds
assembleDebugTest - Assembles the Test build for the Debug build
assembleRelease - Assembles all Release builds
build - Assembles and tests this project.
buildDependents - Assembles and tests this project and all projects that depend on it.
buildNeeded - Assembles and tests this project and all projects it depends on.
clean - Deletes the build directory.

Build Setup tasks
-----------------
init - Initializes a new Gradle build. [incubating]
wrapper - Generates Gradle wrapper files. [incubating]

Help tasks
----------
dependencies - Displays all dependencies declared in root project 'ProjetoMobile'.
dependencyInsight - Displays the insight into a specific dependency in root project 'ProjetoMobile'.
help - Displays a help message
projects - Displays the sub-projects of root project 'ProjetoMobile'.
properties - Displays the properties of root project 'ProjetoMobile'.
tasks - Displays the tasks runnable from root project 'ProjetoMobile' (some of the displayed tasks may belong to subprojects).

Install tasks
-------------
installDebug - Installs the Debug build
installDebugTest - Installs the Test build for the Debug build
uninstallAll - Uninstall all applications.
uninstallDebug - Uninstalls the Debug build
uninstallDebugTest - Uninstalls the Test build for the Debug build
uninstallRelease - Uninstalls the Release build

Verification tasks
------------------
check - Runs all checks.
connectedAndroidTest - Installs and runs the tests for Build 'debug' on connected devices.
connectedCheck - Runs all device checks on currently connected devices.
deviceCheck - Runs all device checks using Device Providers and Test Servers.
lint - Runs lint on all variants.
lintDebug - Runs lint on the Debug build
lintRelease - Runs lint on the Release build

To see all tasks and more detail, run with --all.

BUILD SUCCESSFUL

Total time: 5.155 secs
</pre></div>
</div>
</div>

<p>ou seja, o Gradle conseguiu efetivamente gerar todas as tarefas associadas da sua <em>build</em>! </p>

<p>Agora é só correr para o abraço! (ou quase isso …)</p>

<h3 id="resolvendo-os-erros-da-build">Resolvendo os erros da build</h3>

<p>Nesse momento, você pode querer executar a <em>build</em> do seu projeto com </p>

<div><div class="CodeRay">
  <div class="code"><pre>&gt; gradle build
</pre></div>
</div>
</div>

<p>ou então construir diretamente os <strong>apks</strong> da aplicação via</p>

<div><div class="CodeRay">
  <div class="code"><pre>&gt; gradle assemble
</pre></div>
</div>
</div>

<p>e algo inesperado pode - ou vai - acontecer : o projeto que antes rodava certinho no Eclipse agora falha ao <em>buildar</em> no Gradle…</p>

<p>Há diversos motivos pelos quais isso pode acontecer. Vou tentar listar alguns dos mais comuns</p>

<ol>
  <li>
    <p>Para algum arquivo <strong>build.gradle</strong> de alguma dependência modular, o Gradle não reconheceu os diretórios de interesse, devido a algum erro de mapeamento nos <em><strong>sourceSets</strong></em> .</p>
  </li>
  <li>
    <p>Houve algum erro de checagem do <strong>Lint</strong>, o que interrompe o processo de <em>build</em>.</p>
  </li>
  <li>
    <p>Houve algum erro de compilação.</p>
  </li>
  <li>
    <p>Alguma <em>task</em> que não possui equivalente na <em>build</em> incremental do Eclipse falhou.</p>
  </li>
  <li>
    <p>Dentre outros …</p>
  </li>
</ol>

<p>O erro do <strong>tipo (1)</strong> é questão de prática, paciência e cuidado para ser resolvido, e o procedimento de inspeção do <em>script</em> Gradle para cada módulo brevemente explicado na seção anterior pode ajudar.</p>

<p>O erro do <strong>tipo (2)</strong> é infinitamente mais chato, afinal, no Eclipse conseguimos compilar mesmo com os <em>warnings</em> do Lint … </p>

<p>Para ignorá-los, você pode adicionar diretivas para que as tarefas de execução do Lint não sejam abortadas para o módulo de interesse : </p>

<div><div class="CodeRay">
  <div class="code"><pre>apply plugin: 'android'

android {

    lintOptions {
            abortOnError false
            warningsAsErrors false
    }

        ...
</pre></div>
</div>
</div>

<p>Uma série de parâmetros para essa diretiva estão relacionados na <a href="http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Lint-support">documentação oficial</a>.Mas o ideal mesmo seria não precisar esquentar a cabeça com <em>warnings</em> do Lint nessa altura do campeonato …</p>

<p>O erro do <strong>tipo (3)</strong> é também comum. Uma situação que eu peguei foram <em>imports</em> não utilizados que o Eclipse aparentemente ignora ao compilar, mas que na <em>build</em> via Gradle causam erro … :/</p>

<p>Uma outra situação possível seria você confiar em um <em>script</em> <strong>build.gradle</strong> já presente em um módulo de interesse e que aparentemente está em ordem, mas que faz uso do <strong>Java 7.0</strong> no processo de compilação, e esse eventualmente não está disponível como JDK na máquina (sim, há situações em que isso pode acontecer, <strong>AINDA</strong>!)</p>

<p>O erro do <strong>tipo (4)</strong> pode ocorrer em diversos cenários. Um dos que eu gostaria de destacar é que o plugin do Gradle para o Android prevê uma <em>task</em> que, dentro das suas checagens, verifica se os <strong>9-patchs</strong> da aplicação estão bem formados; ou seja, você pode descobrir que algumas das imagens do seu projeto continham <em>bad patches</em> e a princípio, precisaria atualizá-las para que a <em>build</em> prossiga (e para que o seu usuário não acha botões estranhos na sua aplicação) …</p>

<h3 id="lies-aprendidas">Lições Aprendidas</h3>

<p>Depois desse artigo enorme, deu para ver que dá um trabalho razoável migrar de forma transparente um projeto Android a princípio estruturado no ambiente do Eclipse para o ambiente do Gradle (e consequentemente do Android Studio).</p>

<p>A opção <strong>“Generate Gradle Files”</strong>, acessível pelo Menu <strong>“Export…”</strong> do Eclipse se mostrou uma piada de mau-gosto nas vezes em que tentei usá-la. Eu aconselharia a não confiar mais nela, pelo menos por enquanto.</p>

<p>O trabalho de levantamento de dependências e decisão sobre o que vai ainda permanecer como biblioteca/módulo da aplicação é entediante, porém importante. </p>

<p>Ele será tanto mais longo quanto maior o número de dependências tratadas de qualquer jeito na filosofia de trabalho típica do Eclipse : arquivos <strong>.jar</strong> no diretórios <em>libs</em> e <em>Project Libraries</em> associados via Workspace… </p>

<p>Quem já trabalhou em projetos em time ou mesmo projetos mais longos (e sentiu os tipos de transtorno que isso causa) implorava por uma boa solução, e isso explica por que tantos desenvolvedores confiaram por tanto tempo no <em>plugin</em> do Maven para Android … </p>

<p>Os tempos são outros : agora temos o Gradle, uma ferramenta que se alinha com o estado da arte de como um sistema de <em>build</em> deve realmente ser nos dias de hoje. </p>

<p>Em breve, devo montar algum material (provavelmente uma palestra) falando sobre as vantagens de se trabalhar com Gradle para a produtividade do desenvolvedor Android; afinal, não mencionei uma sequer aqui.</p>

<p>Gostaria de ter delineado mais esse artigo e tecido uma explicação mais detalhada sobre alguns pontos, mas realmente o tamanho dele superou as expectativas e paro por aqui. Se alguém encontrou algum erro, peço um comentário amigo para que o mesmo seja corrigido.</p>

<p>Para você que chegou até o fim, espero que eu tenha ajudado em alguma coisa! </p>

<p>Aquele abraço e até a próxima!</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Brio com vazio]]></title>
    <link href="http://ubiratansoares.github.io/blog/2014/03/24/brio-com-vazio/"/>
    <updated>2014-03-24T00:28:17-03:00</updated>
    <id>http://ubiratansoares.github.io/blog/2014/03/24/brio-com-vazio</id>
    <content type="html"><![CDATA[<p>Sinto como se não estivesse no meu lugar. Deslocado. Irriquieto.  Desconfortável com algo cuja explicação foge ao lógico…</p>

<!--more-->
<p>A sensação é um misto de brio com vazio. O primeiro, por muito tempo apequenado, talvez hoje possa ser visto em algum volume - e por sua vez, ressalte mais aos olhares de quem vê. Aos olhos de quem sente, contudo, o segundo aparece constantemente como maior…</p>

<p>E eu então não consigo deixar me perguntar as origens desse vazio. </p>

<p>Se é consequência própria do brio, em uma outra face da moeda…</p>

<p>Se é um derivado de coisas que agora só existem no passado presentificado… </p>

<p>Se não se trata apenas de carências próprias de um longo período de solidão, ou mesmo se ele sempre esteve ali e passou sem ser visto…</p>

<p>Vazio pressupõe ausência, falta, mas essa não é a platônica a princípio. Pois existe a clara impressão de que esse algo que falta ainda é não traduzível em palavras ou em idéia, e por consequência, é diferente de um objeto ou conceito conhecido mas impossível.</p>

<p>Também tenho ciência de que essa falta é diferente da lacuna própria dos objetivos. Até por que, nesse caso, a maioria dos desejos moram na esfera do material, e portanto alcançáveis mediante organização e paciência. </p>

<p>Esse vazio é alguma outra coisa. Está mais para as primeiras cinzas que se formaram depois que a chama do meu espírito se acendeu e queimou intensamente… E se assim for, então a tendência é que ele ainda me acompanhe por muito tempo, possivelmente enquanto eu viver…</p>

<p>E se assim for, talvez o caminho seja pensar mais na sorte do que no azar de viver essa dicotomia. Em focar mais no alinhamento com o hoje. </p>

<p>E acima de tudo, em ter a humildade sempre renovada para continuar não se conformando.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Novo Blog no ar]]></title>
    <link href="http://ubiratansoares.github.io/blog/2014/03/16/novo-blog-no-ar/"/>
    <updated>2014-03-16T22:44:54-03:00</updated>
    <id>http://ubiratansoares.github.io/blog/2014/03/16/novo-blog-no-ar</id>
    <content type="html"><![CDATA[<p>Fala galera!</p>

<p>Resolvi voltar aqui de um jeito igual, mas diferente : fazendo (de novo) o <em>setup</em> de um novo blog e uma nova webpage. </p>

<p>Eu já estava bastante cansado do velho esquema do Wordpress… Algumas coisas ali me irritavam mais do que era necessário, e com um fluxo de acesso ao meu blog aumentando nos últimos meses - muito em decorrência das apresentações nos eventos ao longo do ano passado e uma sequência bacana de posts - eu resolvi que era hora de tentar algo que de alguma forma me estimulasse mais…</p>

<!-- more -->
<p>Sendo assim, a partir de agora eu publico as minhas idéias através do <a href="http://octopress.org/">Octopress</a>, com <em>deploy</em> via Github. Acredito que essa é uma maneira interessante de realmente fazer o que sempre quis por aqui.</p>

<p>Muito em breve eu devo republicar os <em>posts</em> mais relevantes do meu antigo blog aqui também, em especial aqueles referentes às apresentações de 2013 com seus devidos adendos e comentários. Aproveitando a deixa, partir de agora eu subo meus slides das palestras via <a href="https://speakerdeck.com/ubiratansoares">SpeakerDeck</a>.</p>

<p>A minha intenção é realmente fazer de 2014 um ano bacana para esse blog, usando o mesmo como mais um instrumento para o meu humilde esforço de contribuição para com a comunidade de desenvolvimento Android aqui no Brasil, que ao meu ver ainda tem <strong>muito</strong> a crescer. </p>

<p>O planejamento é agora <strong>muito</strong> mais honesto e factível, mirando aí pelo menos um artigo técnico por mês. Um facilitador dessa meta - por hora - é o fato de que as primeiras idéias já estão na cabeça, e o foco das mesmas tende a ser um conteúdo técnico um pouco mais avançado relacionado a Android, algo que julgo faltar na nossa comunidade e no nosso idioma.</p>

<p>Espero que gostem e sou todo ouvidos para sugestões!</p>
]]></content>
  </entry>
  
</feed>
